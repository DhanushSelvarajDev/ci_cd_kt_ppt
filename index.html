<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CI/CD with GitHub Actions - Presentation</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&family=Roboto+Mono:wght@400;500;700&display=swap"
        rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet" />
    <style>
        :root {
            --slide-width: 1280px;
            --slide-height: 720px;
            --github-dark: #0d1117;
            --github-border: #30363d;
            --github-text: #c9d1d9;
            --github-blue: #58a6ff;
            --github-green: #2ea44f;
        }

        body,
        html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            background-color: #000;
            font-family: 'Inter', sans-serif;
            color: var(--github-text);
        }

        #presentation-viewport {
            width: 100vw;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        #presentation-container {
            width: var(--slide-width);
            height: var(--slide-height);
            transform-origin: center center;
            position: relative;
            flex-shrink: 0;
        }

        .slide-frame {
            width: 100%;
            height: 100%;
            background-color: var(--github-dark);
            position: absolute;
            top: 0;
            left: 0;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.4s ease-in-out, transform 0.4s ease-in-out;
            transform: scale(0.95);
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
            overflow: hidden;
        }

        .slide-frame.active {
            opacity: 1;
            pointer-events: auto;
            transform: scale(1);
            z-index: 10;
        }

        /* Scaling Logic */

        /* Navigation Controls */
        .nav-overlay {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 15px;
            z-index: 100;
            background: rgba(22, 27, 34, 0.8);
            padding: 10px 20px;
            border-radius: 50px;
            border: 1px solid var(--github-border);
            backdrop-filter: blur(10px);
            opacity: 0.3;
            transition: opacity 0.3s;
        }

        .nav-overlay:hover {
            opacity: 1;
        }

        .nav-btn {
            background: none;
            border: none;
            color: #fff;
            cursor: pointer;
            font-size: 1.2rem;
            padding: 5px 10px;
            border-radius: 5px;
            transition: background 0.2s;
        }

        .nav-btn:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .nav-btn:disabled {
            opacity: 0.2;
            cursor: not-allowed;
        }

        .slide-counter {
            color: var(--github-text);
            font-family: 'Roboto Mono', monospace;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            padding: 0 10px;
            border-left: 1px solid var(--github-border);
            border-right: 1px solid var(--github-border);
        }

        /* Progress Bar */
        .progress-bar-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: rgba(255, 255, 255, 0.1);
            z-index: 101;
        }

        #progress-bar {
            height: 100%;
            background: var(--github-blue);
            width: 0%;
            transition: width 0.3s ease;
        }

        /* Common Slide Styles (Scoped to .slide-frame) */
        .slide-frame iframe {
            width: 100%;
            height: 100%;
            border: none;
        }
    </style>
</head>

<body>

    <div class="progress-bar-container">
        <div id="progress-bar"></div>
    </div>

    <div id="presentation-viewport">
        <div id="presentation-container">
            <!-- Slides will be loaded here -->
            <div id="slides-container"></div>
        </div>
    </div>

    <div class="nav-overlay">
        <button id="prev-btn" class="nav-btn" onclick="prevSlide()" disabled>
            <i class="fa-solid fa-chevron-left"></i>
        </button>
        <div class="slide-counter">
            <span id="current-num">01</span> / <span id="total-num">20</span>
        </div>
        <button id="next-btn" class="nav-btn" onclick="nextSlide()">
            <i class="fa-solid fa-chevron-right"></i>
        </button>

        <div style="width: 1px; height: 20px; background: var(--github-border); margin: 0 5px;"></div>

        <select id="interval-select" class="nav-btn"
            style="background: rgba(22,27,34,0.5); font-size: 0.8rem; border: 1px solid var(--github-border); outline: none;">
            <option value="5000">5s</option>
            <option value="10000" selected>10s</option>
            <option value="15000">15s</option>
            <option value="30000">30s</option>
            <option value="60000">1m</option>
        </select>

        <button id="play-btn" class="nav-btn" onclick="togglePlay()">
            <i id="play-icon" class="fa-solid fa-play"></i>
        </button>

        <button id="fullscreen-btn" class="nav-btn" onclick="toggleFullscreen()">
            <i class="fa-solid fa-expand"></i>
        </button>
    </div>

    <script>
        const totalSlides = 20;
        let currentSlide = 1;
        const slidesContainer = document.getElementById('slides-container');

        // Create slide frames
        for (let i = 1; i <= totalSlides; i++) {
            const frame = document.createElement('div');
            frame.className = 'slide-frame' + (i === 1 ? ' active' : '');
            frame.id = `slide-${i}`;

            // Using iframe to isolate styles and scripts perfectly without manual extraction overhead
            // This is the most robust way to combine complex HTML files with conflicting CSS
            const iframe = document.createElement('iframe');
            iframe.src = `slide${i}.html`;
            iframe.loading = "lazy";

            frame.appendChild(iframe);
            slidesContainer.appendChild(frame);
        }

        let autoPlayTimer = null;
        let isPlaying = false;

        function updateSlide() {
            // Update active class
            document.querySelectorAll('.slide-frame').forEach((f, idx) => {
                f.classList.toggle('active', (idx + 1) === currentSlide);
            });

            // Update counter
            document.getElementById('current-num').textContent = currentSlide.toString().padStart(2, '0');

            // Update buttons
            document.getElementById('prev-btn').disabled = (currentSlide === 1);
            document.getElementById('next-btn').disabled = (currentSlide === totalSlides);

            // Update progress bar
            const progress = (currentSlide / totalSlides) * 100;
            document.getElementById('progress-bar').style.width = `${progress}%`;

            // Update URL hash
            window.location.hash = `/${currentSlide}`;

            // Reset timer if playing
            if (isPlaying) {
                resetAutoPlay();
            }
        }

        function nextSlide() {
            if (currentSlide < totalSlides) {
                currentSlide++;
                updateSlide();
            } else if (isPlaying) {
                // Wrap around when playing
                currentSlide = 1;
                updateSlide();
            }
        }

        function prevSlide() {
            if (currentSlide > 1) {
                currentSlide--;
                updateSlide();
            }
        }

        function togglePlay() {
            isPlaying = !isPlaying;
            const icon = document.getElementById('play-icon');
            if (isPlaying) {
                icon.classList.remove('fa-play');
                icon.classList.add('fa-pause');
                startAutoPlay();
            } else {
                icon.classList.remove('fa-pause');
                icon.classList.add('fa-play');
                stopAutoPlay();
            }
        }

        function startAutoPlay() {
            const interval = parseInt(document.getElementById('interval-select').value);
            autoPlayTimer = setTimeout(() => {
                nextSlide();
            }, interval);
        }

        function stopAutoPlay() {
            clearTimeout(autoPlayTimer);
            autoPlayTimer = null;
        }

        function resetAutoPlay() {
            stopAutoPlay();
            if (isPlaying) {
                startAutoPlay();
            }
        }

        function toggleFullscreen() {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen();
            } else {
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                }
            }
        }

        // Auto-scaling logic
        function handleResize() {
            const viewport = document.getElementById('presentation-viewport');
            const container = document.getElementById('presentation-container');

            const vWidth = viewport.clientWidth;
            const vHeight = viewport.clientHeight;

            const sWidth = 1280;
            const sHeight = 720;

            const scaleX = vWidth / sWidth;
            const scaleY = vHeight / sHeight;

            const scale = Math.min(scaleX, scaleY) * 0.98; // 0.98 for a tiny bit of padding

            container.style.transform = `scale(${scale})`;
        }

        window.addEventListener('resize', handleResize);
        window.addEventListener('load', () => {
            handleResize();

            // Handle initial hash
            const hash = window.location.hash;
            if (hash && hash.startsWith('#/')) {
                const num = parseInt(hash.substring(2));
                if (!isNaN(num) && num >= 1 && num <= totalSlides) {
                    currentSlide = num;
                    updateSlide();
                }
            }
        });

        // Keyboard navigation
        window.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowRight' || e.key === ' ' || e.key === 'Enter') {
                nextSlide();
            } else if (e.key === 'ArrowLeft' || e.key === 'Backspace') {
                prevSlide();
            } else if (e.key === 'f') {
                toggleFullscreen();
            }
        });

    </script>
</body>

</html>